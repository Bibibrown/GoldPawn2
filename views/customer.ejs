
// ตรวจสอบข้อมูลก่อนส่ง
if (!validateCustomerData(updatedCustomerData)) return;

// ส่งข้อมูลที่แก้ไขไปยังเซิร์ฟเวอร์
fetch(`/customer/${encodeURIComponent(updatedCustomerData.customerId)}`, {
    method: 'PUT',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify(updatedCustomerData)
})
    .then(response => {
        if (!response.ok) {
            return response.json().then(data => { throw new Error(data.message || 'เกิดข้อผิดพลาดในการแก้ไขข้อมูลลูกค้า'); });
        }
        return response.json();
    })
    .then(data => {
        alert('แก้ไขข้อมูลลูกค้าเรียบร้อย');
        setFormReadonly(true);  // ล็อกฟอร์มอีกครั้งหลังจากแก้ไข
        document.getElementById('editButton').style.display = 'inline-block'; // แสดงปุ่มแก้ไข
        document.getElementById('confirmButton').style.display = 'none'; // ซ่อนปุ่มยืนยัน
        document.getElementById('addGoldButton').style.display = 'inline-block'; // แสดงปุ่มเพิ่มข้อมูลจำนำทอง
    })
    .catch(err => {
        alert(err.message);
    });
});
</script>
</body>

</html>